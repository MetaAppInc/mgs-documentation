# MGS对接常态问题整理

## 尊敬的开发者：
本文档简单整理了对接MGS游戏中的常见问题，我们会依据开发者的反馈不定期完善本文档。


### 一、基本问题

###### 1、对接MGS的游戏，该游戏需要拥有服务器能力和人员，因为部分接口只提供游戏服务器调用；

###### 2、游戏微调时，需要确认是否根据双方拿到的把玩包修改；

###### 3、需要确定玩法是否都接语音房功能；
- 有多种模式、玩法的游戏，要明确的指出哪些模式、玩法需要对接MGS语音房间。常态：所有多人玩法都需要对接语音房间；

###### 4、CP需要对基础的游戏功能进行整体的自测，相关玩法、功能是否能正常运行；


### 二、房间对接容易产生的问题

###### 1、创建房间和加入房间有时序，需要先创建房间，才能加入房间；
- 部分匹配进入语音房间，A和B玩家的客户端会同时发创建和加入语音房间，这个时候要注意有时序性；

###### 2、客户端发起创建房间后，该客户端不需要再调用加入房间接口；

###### 3、超时处理；
- 不需要的房间，服务器需要通知MGS销毁房间；
- 玩家超时游戏中被踢出游戏房间后，服务器需要通知MGS移除该用户；

###### 4、断线重连；
- 用户杀进程，再开启客户端后，重连回到游戏房间，需要再调用一下MGS的加入房间接口；

###### 5、不要使用用户名称创建房间名称，否则用户名称有违禁词的话会导致创建失败
- 建议使用【游戏名称+MGS房间号】生成房间名字。”太空狼人杀“游戏处理示例如下；
- 先使用游戏名称创建房间，创建房间拿到房间号后再同步修改房间名称为：游戏名称+MGS房间号（如：”太空狼人杀：102200“）

###### 6、加入房间调用闭麦没有生效；
- 加入房间后建议延迟1秒调用闭麦接口；
  - 原因：加入房间后连接语音频道要花费一定时间，连接语音频道后才能闭麦； 

### 三、埋点问题

###### 1、埋点发送到了，但是参数没有发送到 ；
- 埋点的参数需要包裹到json中发送，不能直接传参数；
